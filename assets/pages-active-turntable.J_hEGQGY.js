import{d as e,H as a,L as s,p as t,J as l,c as n,w as o,e as i,o as r,f as u,l as c,n as d,j as f,F as m,k as p,g as _,a as g,t as h,z as v,G as y,M as b}from"./index-g2nEf0DG.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=w(e({__name:"turntable",setup(e){const w=a(),{userInfo:x}=s(w),I=t(0),j=t(0),k=t(!1),$=[{id:1,name:"10积分"},{id:2,name:"谢谢参与"},{id:3,name:"50积分"},{id:4,name:"100积分"},{id:5,name:"5元红包"},{id:6,name:"谢谢参与"}];function z(){if(!k.value){if((x.value.points||0)<10)return y({title:"积分不足",icon:"none"});k.value=!0,setTimeout(()=>{const e=Math.floor(Math.random()*$.length),a=$[e],s=360-e*(360/$.length);j.value=3,I.value=I.value+1800+s,setTimeout(()=>{k.value=!1,b({title:"抽奖结果",content:`恭喜获得：${a.name}`,showCancel:!1});const e=(x.value.points||0)-10;w.setUserInfo({...x.value,points:e})},3e3)},200)}}return l(()=>{w.isLoggedIn&&w.loadUserInfo()}),(e,a)=>{const s=c,t=_,l=i;return r(),n(l,{class:"page"},{default:o(()=>[u(s,{src:"/shanzhili-h5/static/images/home/lottery-bg.png",mode:"scaleToFill",class:"bg-img"}),u(l,{class:"wheel-container"},{default:o(()=>[u(l,{class:"wheel-main",style:d({transform:`rotate(${I.value}deg)`,transition:`transform ${j.value}s ease-in-out`})},{default:o(()=>[(r(),f(m,null,p($,(e,a)=>u(l,{class:"wheel-sector",key:a,style:d({transform:`rotate(${a*(360/$.length)}deg) skewY(-30deg)`})},{default:o(()=>[u(l,{class:"sector-inner"},{default:o(()=>[u(t,{class:"prize-name"},{default:o(()=>[g(h(e.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"])),64))]),_:1},8,["style"]),u(l,{class:"pointer",onClick:z},{default:o(()=>[u(t,{class:"start-text"},{default:o(()=>[g("立即\\n抽奖")]),_:1})]),_:1})]),_:1}),u(l,{class:"info-box"},{default:o(()=>[u(t,{class:"info-title"},{default:o(()=>[g("每次抽奖消耗 10 积分")]),_:1}),u(t,{class:"my-points"},{default:o(()=>[g("我的积分: "+h(v(x).points||0),1)]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-b47132b9"]]);export{x as default};
